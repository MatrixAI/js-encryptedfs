!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.encryptedfs=r():t.encryptedfs=r()}(this,(function(){return function(t){var r={};function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=r,e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var n in t)e.d(i,n,function(r){return t[r]}.bind(null,n));return i},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=3)}([function(t,r,e){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=e(6),n=e(7),o=e(8);function s(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,r){if(s()<r)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=a.prototype:(null===t&&(t=new a(r)),t.length=r),t}function a(t,r,e){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return u(this,t,r,e)}function u(t,r,e,i){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?function(t,r,e,i){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(i||0))throw new RangeError("'length' is out of bounds");r=void 0===e&&void 0===i?new Uint8Array(r):void 0===i?new Uint8Array(r,e):new Uint8Array(r,e,i);a.TYPED_ARRAY_SUPPORT?(t=r).__proto__=a.prototype:t=f(t,r);return t}(t,r,e,i):"string"==typeof r?function(t,r,e){"string"==typeof e&&""!==e||(e="utf8");if(!a.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var i=0|y(r,e),n=(t=c(t,i)).write(r,e);n!==i&&(t=t.slice(0,n));return t}(t,r,e):function(t,r){if(a.isBuffer(r)){var e=0|p(r.length);return 0===(t=c(t,e)).length||r.copy(t,0,0,e),t}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||(i=r.length)!=i?c(t,0):f(t,r);if("Buffer"===r.type&&o(r.data))return f(t,r.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,r){if(h(r),t=c(t,r<0?0:0|p(r)),!a.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function f(t,r){var e=r.length<0?0:0|p(r.length);t=c(t,e);for(var i=0;i<e;i+=1)t[i]=255&r[i];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function y(t,r){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return Y(t).length;default:if(i)return z(t).length;r=(""+r).toLowerCase(),i=!0}}function d(t,r,e){var i=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,r,e);case"utf8":case"utf-8":return F(this,r,e);case"ascii":return T(this,r,e);case"latin1":case"binary":return R(this,r,e);case"base64":return k(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function g(t,r,e){var i=t[r];t[r]=t[e],t[e]=i}function w(t,r,e,i,n){if(0===t.length)return-1;if("string"==typeof e?(i=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=n?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(n)return-1;e=t.length-1}else if(e<0){if(!n)return-1;e=0}if("string"==typeof r&&(r=a.from(r,i)),a.isBuffer(r))return 0===r.length?-1:_(t,r,e,i,n);if("number"==typeof r)return r&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,i,n);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,i,n){var o,s=1,c=t.length,a=r.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||r.length<2)return-1;s=2,c/=2,a/=2,e/=2}function u(t,r){return 1===s?t[r]:t.readUInt16BE(r*s)}if(n){var h=-1;for(o=e;o<c;o++)if(u(t,o)===u(r,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===a)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(e+a>c&&(e=c-a),o=e;o>=0;o--){for(var l=!0,f=0;f<a;f++)if(u(t,o+f)!==u(r,f)){l=!1;break}if(l)return o}return-1}function m(t,r,e,i){e=Number(e)||0;var n=t.length-e;i?(i=Number(i))>n&&(i=n):i=n;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var c=parseInt(r.substr(2*s,2),16);if(isNaN(c))return s;t[e+s]=c}return s}function S(t,r,e,i){return K(z(r,t.length-e),t,e,i)}function E(t,r,e,i){return K(function(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}(r),t,e,i)}function b(t,r,e,i){return E(t,r,e,i)}function D(t,r,e,i){return K(Y(r),t,e,i)}function v(t,r,e,i){return K(function(t,r){for(var e,i,n,o=[],s=0;s<t.length&&!((r-=2)<0);++s)e=t.charCodeAt(s),i=e>>8,n=e%256,o.push(n),o.push(i);return o}(r,t.length-e),t,e,i)}function k(t,r,e){return 0===r&&e===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(r,e))}function F(t,r,e){e=Math.min(t.length,e);for(var i=[],n=r;n<e;){var o,s,c,a,u=t[n],h=null,l=u>239?4:u>223?3:u>191?2:1;if(n+l<=e)switch(l){case 1:u<128&&(h=u);break;case 2:128==(192&(o=t[n+1]))&&(a=(31&u)<<6|63&o)>127&&(h=a);break;case 3:o=t[n+1],s=t[n+2],128==(192&o)&&128==(192&s)&&(a=(15&u)<<12|(63&o)<<6|63&s)>2047&&(a<55296||a>57343)&&(h=a);break;case 4:o=t[n+1],s=t[n+2],c=t[n+3],128==(192&o)&&128==(192&s)&&128==(192&c)&&(a=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&c)>65535&&a<1114112&&(h=a)}null===h?(h=65533,l=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),n+=l}return function(t){var r=t.length;if(r<=4096)return String.fromCharCode.apply(String,t);var e="",i=0;for(;i<r;)e+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return e}(i)}r.Buffer=a,r.SlowBuffer=function(t){+t!=t&&(t=0);return a.alloc(+t)},r.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),r.kMaxLength=s(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,r,e){return u(null,t,r,e)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,r,e){return function(t,r,e,i){return h(r),r<=0?c(t,r):void 0!==e?"string"==typeof i?c(t,r).fill(e,i):c(t,r).fill(e):c(t,r)}(null,t,r,e)},a.allocUnsafe=function(t){return l(null,t)},a.allocUnsafeSlow=function(t){return l(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,r){if(!a.isBuffer(t)||!a.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,i=r.length,n=0,o=Math.min(e,i);n<o;++n)if(t[n]!==r[n]){e=t[n],i=r[n];break}return e<i?-1:i<e?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,r){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=a.allocUnsafe(r),n=0;for(e=0;e<t.length;++e){var s=t[e];if(!a.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,n),n+=s.length}return i},a.byteLength=y,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)g(this,r,r+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)g(this,r,r+3),g(this,r+1,r+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)g(this,r,r+7),g(this,r+1,r+6),g(this,r+2,r+5),g(this,r+3,r+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?F(this,0,t):d.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,r,e,i,n){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),r<0||e>t.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&r>=e)return 0;if(i>=n)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(n>>>=0)-(i>>>=0),s=(e>>>=0)-(r>>>=0),c=Math.min(o,s),u=this.slice(i,n),h=t.slice(r,e),l=0;l<c;++l)if(u[l]!==h[l]){o=u[l],s=h[l];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},a.prototype.indexOf=function(t,r,e){return w(this,t,r,e,!0)},a.prototype.lastIndexOf=function(t,r,e){return w(this,t,r,e,!1)},a.prototype.write=function(t,r,e,i){if(void 0===r)i="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)i=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===i&&(i="utf8")):(i=e,e=void 0)}var n=this.length-r;if((void 0===e||e>n)&&(e=n),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return m(this,t,r,e);case"utf8":case"utf-8":return S(this,t,r,e);case"ascii":return E(this,t,r,e);case"latin1":case"binary":return b(this,t,r,e);case"base64":return D(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(t,r,e){var i="";e=Math.min(t.length,e);for(var n=r;n<e;++n)i+=String.fromCharCode(127&t[n]);return i}function R(t,r,e){var i="";e=Math.min(t.length,e);for(var n=r;n<e;++n)i+=String.fromCharCode(t[n]);return i}function A(t,r,e){var i=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>i)&&(e=i);for(var n="",o=r;o<e;++o)n+=x(t[o]);return n}function C(t,r,e){for(var i=t.slice(r,e),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function O(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function P(t,r,e,i,n,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>n||r<o)throw new RangeError('"value" argument is out of bounds');if(e+i>t.length)throw new RangeError("Index out of range")}function I(t,r,e,i){r<0&&(r=65535+r+1);for(var n=0,o=Math.min(t.length-e,2);n<o;++n)t[e+n]=(r&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function B(t,r,e,i){r<0&&(r=4294967295+r+1);for(var n=0,o=Math.min(t.length-e,4);n<o;++n)t[e+n]=r>>>8*(i?n:3-n)&255}function L(t,r,e,i,n,o){if(e+i>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function N(t,r,e,i,o){return o||L(t,0,e,4),n.write(t,r,e,i,23,4),e+4}function U(t,r,e,i,o){return o||L(t,0,e,8),n.write(t,r,e,i,52,8),e+8}a.prototype.slice=function(t,r){var e,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(r=void 0===r?i:~~r)<0?(r+=i)<0&&(r=0):r>i&&(r=i),r<t&&(r=t),a.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=a.prototype;else{var n=r-t;e=new a(n,void 0);for(var o=0;o<n;++o)e[o]=this[o+t]}return e},a.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||O(t,r,this.length);for(var i=this[t],n=1,o=0;++o<r&&(n*=256);)i+=this[t+o]*n;return i},a.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||O(t,r,this.length);for(var i=this[t+--r],n=1;r>0&&(n*=256);)i+=this[t+--r]*n;return i},a.prototype.readUInt8=function(t,r){return r||O(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,r){return r||O(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,r){return r||O(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,r){return r||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,r){return r||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||O(t,r,this.length);for(var i=this[t],n=1,o=0;++o<r&&(n*=256);)i+=this[t+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*r)),i},a.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||O(t,r,this.length);for(var i=r,n=1,o=this[t+--i];i>0&&(n*=256);)o+=this[t+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*r)),o},a.prototype.readInt8=function(t,r){return r||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,r){r||O(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},a.prototype.readInt16BE=function(t,r){r||O(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},a.prototype.readInt32LE=function(t,r){return r||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,r){return r||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,r){return r||O(t,4,this.length),n.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,r){return r||O(t,4,this.length),n.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,r){return r||O(t,8,this.length),n.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,r){return r||O(t,8,this.length),n.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,r,e,i){(t=+t,r|=0,e|=0,i)||P(this,t,r,e,Math.pow(2,8*e)-1,0);var n=1,o=0;for(this[r]=255&t;++o<e&&(n*=256);)this[r+o]=t/n&255;return r+e},a.prototype.writeUIntBE=function(t,r,e,i){(t=+t,r|=0,e|=0,i)||P(this,t,r,e,Math.pow(2,8*e)-1,0);var n=e-1,o=1;for(this[r+n]=255&t;--n>=0&&(o*=256);)this[r+n]=t/o&255;return r+e},a.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||P(this,t,r,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},a.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||P(this,t,r,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):I(this,t,r,!0),r+2},a.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||P(this,t,r,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):I(this,t,r,!1),r+2},a.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||P(this,t,r,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):B(this,t,r,!0),r+4},a.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||P(this,t,r,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):B(this,t,r,!1),r+4},a.prototype.writeIntLE=function(t,r,e,i){if(t=+t,r|=0,!i){var n=Math.pow(2,8*e-1);P(this,t,r,e,n-1,-n)}var o=0,s=1,c=0;for(this[r]=255&t;++o<e&&(s*=256);)t<0&&0===c&&0!==this[r+o-1]&&(c=1),this[r+o]=(t/s>>0)-c&255;return r+e},a.prototype.writeIntBE=function(t,r,e,i){if(t=+t,r|=0,!i){var n=Math.pow(2,8*e-1);P(this,t,r,e,n-1,-n)}var o=e-1,s=1,c=0;for(this[r+o]=255&t;--o>=0&&(s*=256);)t<0&&0===c&&0!==this[r+o+1]&&(c=1),this[r+o]=(t/s>>0)-c&255;return r+e},a.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||P(this,t,r,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},a.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||P(this,t,r,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):I(this,t,r,!0),r+2},a.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||P(this,t,r,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):I(this,t,r,!1),r+2},a.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||P(this,t,r,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):B(this,t,r,!0),r+4},a.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||P(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):B(this,t,r,!1),r+4},a.prototype.writeFloatLE=function(t,r,e){return N(this,t,r,!0,e)},a.prototype.writeFloatBE=function(t,r,e){return N(this,t,r,!1,e)},a.prototype.writeDoubleLE=function(t,r,e){return U(this,t,r,!0,e)},a.prototype.writeDoubleBE=function(t,r,e){return U(this,t,r,!1,e)},a.prototype.copy=function(t,r,e,i){if(e||(e=0),i||0===i||(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<e&&(i=e),i===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-e&&(i=t.length-r+e);var n,o=i-e;if(this===t&&e<r&&r<i)for(n=o-1;n>=0;--n)t[n+r]=this[n+e];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)t[n+r]=this[n+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},a.prototype.fill=function(t,r,e,i){if("string"==typeof t){if("string"==typeof r?(i=r,r=0,e=this.length):"string"==typeof e&&(i=e,e=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!a.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var s=a.isBuffer(t)?t:z(new a(t,i).toString()),c=s.length;for(o=0;o<e-r;++o)this[o+r]=s[o%c]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function x(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,r){var e;r=r||1/0;for(var i=t.length,n=null,o=[],s=0;s<i;++s){if((e=t.charCodeAt(s))>55295&&e<57344){if(!n){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(r-=3)>-1&&o.push(239,191,189);continue}n=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),n=e;continue}e=65536+(n-55296<<10|e-56320)}else n&&(r-=3)>-1&&o.push(239,191,189);if(n=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function Y(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,r,e,i){for(var n=0;n<i&&!(n+e>=r.length||n>=t.length);++n)r[n+e]=t[n];return n}}).call(this,e(5))},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const i=e(10),n=Object.freeze({SALT_LEN:64,INIT_VECTOR_LEN:12,AUTH_TAG_LEN:16,KEY_LEN:32,PBKDF_NUM_ITERATIONS:9816});r.cryptoConstants=n,r.initializeWorkerPool=function(t=8){return i.Pool(()=>i.spawn(new i.Worker("./EncryptedFSCryptoWorker.ts")),t)}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const i=Object.freeze({O_RDONLY:0,O_WRONLY:1,O_RDWR:2,O_ACCMODE:3,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,COPYFILE_EXCL:1,SEEK_SET:0,SEEK_CUR:1,SEEK_END:2,MAP_SHARED:1,MAP_PRIVATE:2});r.constants=i;const n=i.S_IRUSR|i.S_IWUSR|i.S_IRGRP|i.S_IWGRP|i.S_IROTH|i.S_IWOTH;r.DEFAULT_FILE_PERM=n},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e(4);r.EncryptedFS=i.default;var n=e(1);r.initializeWorkerPool=n.initializeWorkerPool},function(module,exports,__webpack_require__){"use strict";(function(Buffer){var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const EncryptedFSCrypto_1=__webpack_require__(9),FileDescriptor_1=__importDefault(__webpack_require__(11)),path_1=__importDefault(__webpack_require__(12)),constants_1=__webpack_require__(2),EncryptedFSError_1=__webpack_require__(14),Streams_1=__webpack_require__(16),util_1=__webpack_require__(18),auto_bind_proxy_1=__importDefault(__webpack_require__(19)),util_2=__webpack_require__(1);class EncryptedFS{constructor(t,r,e,i,n,o=18,s=4096,c=!1,a,u){this.umask=o,this.masterKey="string"==typeof t?Buffer.from(t):t,this.crypto=a?new EncryptedFSCrypto_1.EncryptedFSCrypto(this.masterKey,a,c,u):new EncryptedFSCrypto_1.EncryptedFSCrypto(this.masterKey,__webpack_require__(20),c,u),this.upperDir=auto_bind_proxy_1.default(r),this.upperDirContextControl=auto_bind_proxy_1.default(e),this.lowerDir=i,this.lowerDirContextControl=n,this.blockSize=s,this.chunkSize=this.blockSize+util_2.cryptoConstants.SALT_LEN+util_2.cryptoConstants.INIT_VECTOR_LEN+util_2.cryptoConstants.AUTH_TAG_LEN,this.fileDescriptors=new Map,this.metadata={},this.constants=constants_1.constants}getUmask(){return this.umask}setUmask(t){this.upperDirContextControl.setUmask(t),this.lowerDirContextControl.umask(t),this.umask=t}getUid(){return this.uid}setUid(t){this.upperDirContextControl.setUid(t),this.lowerDirContextControl.setuid(t),this.uid=t}getGid(){return this.gid}setGid(t){this.upperDirContextControl.setGid(t),this.lowerDirContextControl.setgid(t),this.gid=t}getCwd(){return this.upperDirContextControl.getCwd()}chdir(t){this.upperDirContextControl.chdir(t),this.lowerDirContextControl.chdir(t)}async access(t,r=0){try{await util_1.promisify(this.lowerDir.access)(t,r)}catch(t){throw t}}accessSync(t,r=this.constants.F_OK){this.lowerDir.accessSync(t,r)}async lstat(t){try{return await util_1.promisify(this.upperDir.lstatSync)(t)}catch(t){throw t}}lstatSync(t){return this.upperDir.lstatSync(t)}async mkdir(t,r={mode:511,recursive:!1}){try{return r.recursive?await util_1.promisify(this.upperDir.mkdirp)(t,r.mode):await util_1.promisify(this.upperDir.mkdir)(t,r.mode),await util_1.promisify(this.lowerDir.mkdir)(t,r)}catch(t){throw t}}mkdirSync(t,r={mode:511,recursive:!1}){this.lowerDir.mkdirSync(t,r),r.recursive?this.upperDir.mkdirpSync(t,r.mode):this.upperDir.mkdirSync(t,r.mode)}async mkdtemp(t,r="utf8"){try{const e=await util_1.promisify(this.upperDir.mkdtemp)(t,r);return await util_1.promisify(this.lowerDir.mkdtemp)(t,r),e}catch(t){throw t}}mkdtempSync(t,r="utf8"){const e=this.lowerDir.mkdtempSync(t,r),i=this.lowerDir.statSync(e);return this.upperDir.mkdirpSync(e,i.mode),e}async stat(t){try{return await util_1.promisify(this.upperDir.stat)(t)}catch(t){throw t}}statSync(t){return this.upperDir.statSync(t)}async rmdir(t,r){var e;try{null!==(e=null==r?void 0:r.recursive)&&void 0!==e&&e||await util_1.promisify(this.upperDir.mkdtemp)(t,r),await util_1.promisify(this.lowerDir.rmdir)(t,r)}catch(t){throw t}}rmdirSync(t,r){try{(null==r?void 0:r.recursive)||this.upperDir.rmdirSync(t),this.lowerDir.rmdirSync(t,r)}catch(t){throw t}}async symlink(t,r,e){try{this.upperDir.symlinkSync(t,r,e),await util_1.promisify(this.lowerDir.symlink)(t,r,e)}catch(t){throw t}}symlinkSync(t,r,e="file"){this.upperDir.symlinkSync(t,r,e),this.lowerDir.symlinkSync(t,r,e)}async truncate(t,r=0){try{this.upperDir.truncateSync(t,r)}catch(t){throw t}}truncateSync(t,r=0){return this.upperDir.truncateSync(t,r)}async unlink(t){try{this.upperDir.unlinkSync(t),await util_1.promisify(this.lowerDir.unlink)(t)}catch(t){throw t}}unlinkSync(t){return this.upperDir.unlinkSync(t)}async utimes(t,r,e){try{this.upperDir.utimesSync(t,r,e),await util_1.promisify(this.lowerDir.utimes)(t,r,e)}catch(t){throw t}}utimesSync(t,r,e){this.upperDir.utimesSync(t,r,e),this.lowerDir.utimesSync(t,r,e)}async close(t){if(!this.isFileDescriptor(t))throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EBADF,null,null,"close");{this.upperDir.closeSync(t);const r=this.getLowerFd(t);await util_1.promisify(this.lowerDir.close)(r)}}closeSync(t){if(this.isFileDescriptor(t)){const r=this.getLowerFd(t);this.lowerDir.closeSync(r),this.upperDir.closeSync(t),this.fileDescriptors.delete(t)}}async readdir(t,r){try{return await util_1.promisify(this.lowerDir.readdir)(t,r)}catch(t){throw t}}readdirSync(t,r){return this.upperDir.readdirSync(t,r)}createReadStream(t,r){if(t=this.getPath(t),void 0!==(r=this.getStreamOptions({flags:"r",encoding:void 0,fd:null,mode:constants_1.DEFAULT_FILE_PERM,autoClose:!0,end:1/0},r)).start&&r.start>r.end)throw new RangeError("ERR_VALUE_OUT_OF_RANGE");return new Streams_1.ReadStream(t,r,this)}createWriteStream(t,r){if(t=this.getPath(t),void 0!==(r=this.getStreamOptions({flags:"w",encoding:"utf8",fd:null,mode:constants_1.DEFAULT_FILE_PERM,autoClose:!0},r)).start&&r.start<0)throw new RangeError("ERR_VALUE_OUT_OF_RANGE");return new Streams_1.WriteStream(t,r,this)}async exists(t){try{return await util_1.promisify(this.lowerDir.exists)(t)}catch(t){throw t}}existsSync(t){return this.lowerDir.existsSync(t)}async fallocate(t,r,e){return await util_1.promisify(this.upperDir.fallocate)(t,r,e)}fallocateSync(t,r,e){return this.upperDir.fallocateSync(t,r,e)}async fchmod(t,r=0){return await util_1.promisify(this.upperDir.fchmod)(t,r)}fchmodSync(t,r=0){return this.upperDir.fchmodSync(t,r)}async fchown(t,r,e){return await util_1.promisify(this.upperDir.fchown)(t,r,e)}fchownSync(t,r,e){return this.upperDir.fchownSync(t,r,e)}async fdatasync(t){return await util_1.promisify(this.upperDir.fdatasync)(t)}fdatasyncSync(t){return this.upperDir.fdatasyncSync(t)}async fstat(t){return await util_1.promisify(this.upperDir.fstat)(t)}fstatSync(t){return this.upperDir.fstatSync(t)}async fsync(t){return await util_1.promisify(this.upperDir.fsync)(t)}fsyncSync(t){return this.upperDir.fsyncSync(t)}async ftruncate(t,r=0){return await util_1.promisify(this.upperDir.ftruncate)(t,r)}ftruncateSync(t,r=0){return this.upperDir.ftruncateSync(t,r)}async futimes(t,r,e){return await util_1.promisify(this.upperDir.futimes)(t,r,e)}futimesSync(t,r,e){return this.upperDir.futimesSync(t,r,e)}async link(t,r){await util_1.promisify(this.upperDir.link)(t,r),await util_1.promisify(this.lowerDir.link)(t,r)}linkSync(t,r){this.lowerDir.linkSync(t,r),this.upperDir.linkSync(t,r)}async readFile(t,r){const e=this.getFileOptions({encoding:null,mode:438,flag:"r"},r);let i=null;try{i="number"==typeof t?t:await this.open(t,e.flag,e.mode);const r=this.getMetadata(i).size,n=Buffer.alloc(r);return await this.read(i,n),e.encoding?n.toString(e.encoding):n}catch(t){throw t}finally{i&&await this.close(i)}}readFileSync(t,r){const e=this.getFileOptions({encoding:null,mode:438,flag:"r"},r);let i=null;try{if(i="number"==typeof t?t:this.openSync(t,e.flag,e.mode),this.fstatSync(i).isDirectory())throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EISDIR,null,null,"read");const r=this.getMetadata(i).size,n=Buffer.alloc(r);return this.readSync(i,n,0,r,0),e.encoding?n.toString(e.encoding):n}finally{i&&this.closeSync(i)}}async readlink(t,r){try{return this.upperDir.readlinkSync(t,r)}catch(t){throw t}}readlinkSync(t,r){return this.upperDir.readlinkSync(t,r)}async realpath(t,r){try{return await util_1.promisify(this.upperDir.realpath)(t,r)}catch(t){throw t}}realpathSync(t,r){return this.upperDir.realpathSync(t,r)}async rename(t,r){try{this.upperDir.renameSync(t,r),await util_1.promisify(this.lowerDir.rename)(t,r)}catch(t){throw t}}renameSync(t,r){return this.upperDir.renameSync(t,r)}async read(t,r,e=0,i=r.length,n=0){if(e<0)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EINVAL,null,null,"read");if(i<0)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EINVAL,null,null,"read");if(n<0)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EINVAL,null,null,"read");if(this.fstatSync(t).isDirectory())throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EISDIR,null,null,"read");try{const o=this.getLowerFd(t),s=this.getMetadata(t);n+i>s.size&&(i=s.size-n);let c=0,a=e;const u=Math.ceil(i/this.blockSize),h=this.offsetToBlockNum(n);let l=this.getBoundaryOffset(n);for(let t=h;t-h<u;t++){const e=this.chunkNumToOffset(t),n=Buffer.alloc(this.chunkSize);await util_1.promisify(this.lowerDir.read)(o,n,0,this.chunkSize,e);const s=await this.crypto.decryptChunk(n),u=i>c+s.length?s.length:i-t*this.blockSize,h=s.copy(r,a,l,u);c+=h,a+=h,l+=h}return c}catch(t){throw t}}readSync(t,r,e=0,i=r.length,n=0){if(e<0)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EINVAL,null,null,"readSync");if(i<0)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EINVAL,null,null,"readSync");if(n<0)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EINVAL,null,null,"readSync");if(this.fstatSync(t).isDirectory())throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EISDIR,null,null,"readSync");try{const o=this.getLowerFd(t),s=this.getMetadata(t);n+i>s.size&&(i=s.size-n);const c=[],a=Math.ceil(i/this.blockSize),u=this.offsetToBlockNum(n);for(let t=u;t-u<a;t++){const r=this.chunkNumToOffset(t),e=Buffer.alloc(this.chunkSize);this.lowerDir.readSync(o,e,0,this.chunkSize,r);const i=this.crypto.decryptChunkSync(e);c.push(i)}const h=Buffer.concat(c,a*this.blockSize),l=this.getBoundaryOffset(n),f=l+i;return h.copy(r,e,l,f)}catch(t){throw t}}async write(t,r,e=0,i=r.length-e,n=0){if(e<0)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EINVAL,null,null,"write");if(i<0)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EINVAL,null,null,"write");if(n<0)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EINVAL,null,null,"write");if(this.fstatSync(t).isDirectory())throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EISDIR,null,null,"write");try{const o=t,s=this.getLowerFd(t),c=this.getBoundaryOffset(n),a=Math.ceil((c+i)/this.blockSize),u=this.offsetToBlockNum(n),h=u,l=u+a-1;let f=0;const p=e,y=p+Math.min(this.blockSize-c,i),d=r.slice(p,y),g=await this.overlaySegment(o,d,n),w=await this.crypto.encryptBlock(g);f+=d.length;const _=(a-2)*this.blockSize,m=y+_,S=m+(i-(f+_));let E,b;if(a>=2){const t=r.slice(m,S),e=this.blockNumToOffset(l);E=await this.overlaySegment(o,t,e),b=await this.crypto.encryptBlock(E),f+=t.length}else E=null,b=null;let D=[],v=[];if(a>=3){const t=r.slice(y,m),e=this.blockGenerator(t);let i=u+1;for(let t of e){const r=this.blockNumToOffset(i),e=await this.overlaySegment(o,t,r),n=await this.crypto.encryptBlock(e);D.push(e),v.push(n),i+=1,f+=t.length}}let k=[];k.push(g),k.push(...D),E&&k.push(E);const F=Buffer.concat(k,this.blockSize*a);await util_1.promisify(this.upperDir.write)(o,F,0,F.length,this.blockNumToOffset(u));let T=[];T.push(w),T.push(...v),b&&T.push(b);const R=Buffer.concat(T,this.chunkSize*a);await util_1.promisify(this.lowerDir.write)(s,R,0,R.length,this.chunkNumToOffset(h));const A=n+i;return A>this.getMetadata(o).size&&(this.getMetadata(o).size=A,this.writeMetadataSync(o)),f}catch(t){throw t}}writeSync(t,r,e=0,i=r.length-e,n=0){if(e<0)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EINVAL,null,null,"writeSync");if(i<0)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EINVAL,null,null,"writeSync");if(n<0)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EINVAL,null,null,"writeSync");if(this.fstatSync(t).isDirectory())throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EISDIR,null,null,"writeSync");try{const o=t,s=this.getLowerFd(t),c=this.getBoundaryOffset(n),a=Math.ceil((c+i)/this.blockSize),u=this.offsetToBlockNum(n),h=u,l=u+a-1;let f=0;const p=e,y=p+Math.min(this.blockSize-c,i),d=r.slice(p,y),g=this.overlaySegmentSync(o,d,n),w=this.crypto.encryptBlockSync(g);f+=d.length;const _=(a-2)*this.blockSize,m=y+_,S=m+(i-(f+_));let E,b;if(a>=2){const t=r.slice(m,S),e=this.blockNumToOffset(l);E=this.overlaySegmentSync(o,t,e),b=this.crypto.encryptBlockSync(E),f+=t.length}else E=null,b=null;let D=[],v=[];if(a>=3){const t=r.slice(y,m),e=this.blockGenerator(t);let i=u+1;for(let t of e){const r=this.blockNumToOffset(i),e=this.overlaySegmentSync(o,t,r),n=this.crypto.encryptBlockSync(e);D.push(e),v.push(n),i+=1,f+=t.length}}let k=[];k.push(g),k.push(...D),E&&k.push(E);const F=Buffer.concat(k,this.blockSize*a);this.upperDir.writeSync(o,F,0,F.length,this.blockNumToOffset(u));let T=[];T.push(w),T.push(...v),b&&T.push(b);const R=Buffer.concat(T,this.chunkSize*a);this.lowerDir.writeSync(s,R,0,R.length,this.chunkNumToOffset(h));const A=n+i;return A>this.getMetadata(t).size&&(this.getMetadata(t).size=A,this.writeMetadataSync(t)),f}catch(t){throw t}}async appendFile(t,r,e){const i=this.getFileOptions({encoding:"utf8",mode:438,flag:"a"},e);let n=null;try{n="number"==typeof t?t:await this.open(t,i.flag,i.mode);this.getUpperFd(n);const e=this.getLowerFd(n);await util_1.promisify(this.lowerDir.appendFile)(e,r,i)}catch(t){throw t}finally{n&&await this.close(n)}}appendFileSync(t,r,e){const i=this.getFileOptions({encoding:"utf8",mode:438,flag:"a"},e);let n=null;try{n="number"==typeof t?t:this.openSync(t,i.flag,i.mode);this.getUpperFd(n);const e=this.getLowerFd(n);this.lowerDir.appendFileSync(e,r,i)}catch(t){throw t}finally{n&&this.closeSync(n)}}async chmod(t,r=0){try{await util_1.promisify(this.upperDir.chmod)(t,r),await util_1.promisify(this.lowerDir.chmod)(t,r)}catch(t){throw t}}chmodSync(t,r=0){this.upperDir.chmodSync(t,r),this.lowerDir.chmodSync(t,r)}async chown(t,r,e){try{await util_1.promisify(this.upperDir.chown)(t,r,e),await util_1.promisify(this.lowerDir.chown)(t,r,e)}catch(t){throw t}}chownSync(t,r,e){this.upperDir.chownSync(t,r,e),this.lowerDir.chownSync(t,r,e)}async writeFile(t,r,e={}){try{const i=this.getFileOptions({encoding:"utf8",mode:438,flag:"w"},e);let n;if(this.isFileDescriptor(t))n=t;else{if("string"!=typeof t)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EBADF,null,null,"writeFile");n=await this.open(t,i.flag,i.mode)}let o=0;"string"==typeof r&&(r=Buffer.from(r));let s=r.byteLength,c=0;for(;s>0;){const t=await this.write(n,r,o,s,c);o+=t,s-=t,null!==c&&(c+=t)}}catch(t){throw t}}writeFileSync(t,r,e={}){try{const i=this.getFileOptions({encoding:"utf8",mode:438,flag:"w"},e);let n;if(this.isFileDescriptor(t))n=t;else{if("string"!=typeof t)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EBADF,null,null,"writeFileSync");n=this.openSync(t,i.flag,i.mode)}let o=0;"string"==typeof r&&(r=Buffer.from(r));let s=r.byteLength,c=0;for(;s>0;){const t=this.writeSync(n,r,o,s,c);o+=t,s-=t,null!==c&&(c+=t)}}catch(t){throw t}}async open(t,r="r",e=438){var i;try{const n=this.getPath(t);let o=await util_1.promisify(this.lowerDir.open)(n,r,e);if((await util_1.promisify(this.lowerDir.fstat)(o)).isFile()){await util_1.promisify(this.lowerDir.close)(o);const t="w"===r[0]?"w+":"r+";o=await util_1.promisify(this.lowerDir.open)(n,t,e)}const s=path_1.default.resolve(n);if(!this.upperDir.existsSync(s)){const t=path_1.default.dirname(s);await util_1.promisify(this.upperDir.mkdirp)(t),await util_1.promisify(this.upperDir.close)(await util_1.promisify(this.upperDir.open)(s,"w"))}const c=await util_1.promisify(this.upperDir.open)(s,r,e),a=new FileDescriptor_1.default(o,c,r.toString());if(this.fileDescriptors.set(c,a),null===(i=this.fstatSync(c))||void 0===i?void 0:i.isFile())if("r"===r[0])await this.loadMetadata(c);else if("w"===r[0]){const t=this.crypto.hashSync(this.masterKey);this.metadata[c]={keyHash:t,size:0},this.writeMetadataSync(c)}return c}catch(t){throw t}}openSync(t,r="r",e=438){var i;try{const n=this.getPath(t);let o=this.lowerDir.openSync(n,r,e);if(this.lowerDir.fstatSync(o).isFile()){this.lowerDir.closeSync(o);const t="w"===r[0]?"w+":"r+";o=this.lowerDir.openSync(n,t,e)}const s=path_1.default.resolve(n);if(!this.upperDir.existsSync(s)){const t=path_1.default.dirname(s);this.upperDir.mkdirpSync(t),this.upperDir.closeSync(this.upperDir.openSync(s,"w"))}const c=this.upperDir.openSync(s,r,e),a=new FileDescriptor_1.default(o,c,r.toString());if(this.fileDescriptors.set(c,a),null===(i=this.fstatSync(c))||void 0===i?void 0:i.isFile())if("r"===r[0])this.loadMetadataSync(c);else if("w"===r[0]){const t=this.crypto.hashSync(this.masterKey);this.metadata[c]={keyHash:t,size:0},this.writeMetadataSync(c)}return c}catch(t){throw t}}getKey(){return this.masterKey}getFileOptions(t,r){let e=t;if("string"==typeof r){if(!this.isCharacterEncoding(r))throw Error("Invalid encoding string");return{...t,encoding:r}}if(r){if(r.encoding){if(!this.isCharacterEncoding(r.encoding))throw Error("Invalid encoding string");e={...e,encoding:r.encoding}}r.flag&&(e={...e,flag:r.flag}),r.mode&&(e={...e,mode:r.mode})}return e}getStreamOptions(t,r){let e=t;if("string"==typeof r){if(!this.isCharacterEncoding(r))throw Error("Invalid encoding string");return{...t,encoding:r}}if(r){if(r.highWaterMark&&(e={...e,highWaterMark:r.highWaterMark}),r.flags&&(e={...e,flags:r.flags}),r.encoding){if(!this.isCharacterEncoding(r.encoding))throw Error("Invalid encoding string");e={...e,encoding:r.encoding}}r.fd&&(e={...e,fd:r.fd}),r.mode&&(e={...e,mode:r.mode}),r.autoClose&&(e={...e,autoClose:r.autoClose}),r.start&&(e={...e,start:r.start}),r.end&&(e={...e,end:r.end})}return e}isCharacterEncoding(t){return null!=t&&null!=t&&["ascii","utf8","utf-8","utf16le","ucs2","ucs-2","base64","latin1","binary","hex"].includes(t)}async readBlock(t,r){const e=Buffer.alloc(this.blockSize);if(0==this.getMetadata(t).size)return e.fill(0);const i=this.offsetToBlockNum(r),n=this.blockNumToOffset(i);return await this.read(t,e,0,this.blockSize,n),e}readBlockSync(t,r){const e=Buffer.alloc(this.blockSize);if(0==this.getMetadata(t).size)return e.fill(0);const i=this.offsetToBlockNum(r),n=this.blockNumToOffset(i);return this.readSync(t,e,0,this.blockSize,n),e}async overlaySegment(t,r,e){const i=this.getBoundaryOffset(e);if(0===i&&r.length===this.blockSize)return r;if(i+r.length>this.blockSize)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EINVAL,null,null,"overlaySegment");const n=await this.readBlock(t,e),o=0===i;let s=Buffer.alloc(0);o||(s=n.slice(0,i));const c=n.slice(i+r.length);return Buffer.concat([s,r,c])}overlaySegmentSync(t,r,e){const i=this.getBoundaryOffset(e);if(0===i&&r.length===this.blockSize)return r;if(i+r.length>this.blockSize)throw new EncryptedFSError_1.EncryptedFSError(EncryptedFSError_1.errno.EINVAL,null,null,"overlaySegmentSync");const n=this.readBlockSync(t,e),o=0===i;let s=Buffer.alloc(0);o||(s=n.slice(0,i));const c=n.slice(i+r.length);return Buffer.concat([s,r,c])}getBoundaryOffset(t){return(t+1)%this.blockSize-1}isFileDescriptor(t){return!("number"!=typeof t||!this.fileDescriptors.has(t))}getUpperFd(t){if(this.fileDescriptors.has(t)){const r=this.fileDescriptors.get(t);if(r){const t=r.getUpperFd();if(void 0!==t||null!==t)return t;throw Error("efs file descriptor is undefined")}throw Error("efs file descriptor is undefined")}throw Error("efs file descriptor does not exist")}getLowerFd(t){if(this.fileDescriptors.has(t)){const r=this.fileDescriptors.get(t);if(r){const t=r.getLowerFd();if(void 0!==t||null!==t)return t;throw Error("efs file descriptor is undefined")}throw Error("efs file descriptor is undefined")}throw Error("efs file descriptor does not exist")}offsetToBlockNum(t){return Math.floor(t/this.blockSize)}blockNumToOffset(t){return t*this.blockSize}chunkNumToOffset(t){return t*this.chunkSize}*blockGenerator(t,r=this.blockSize){let e=0;for(;e<t.length;)yield t.slice(e,e+r),e+=r}*chunkGenerator(t,r=this.chunkSize){let e=0;for(;e<t.length;)yield t.slice(e,e+r),e+=r}hasContentSync(t){return 0!==this.lowerDir.fstatSync(t).size}getPostWriteFileSize(t,r,e){const i=this.metadata[t],n=r+e,o=i.size;return n>o?(i.size=n,n):o}writeMetadataSync(t){const r=this.getMetadata(t),e=JSON.stringify(r),i=Buffer.concat([Buffer.from(e)],this.blockSize),n=this.crypto.encryptBlockSync(i),o=this.getMetadataOffsetSync(t);this.lowerDir.writeSync(this.getLowerFd(t),n,0,n.length,o)}async loadMetadata(fd){const metaChunk=Buffer.alloc(this.chunkSize),metaChunkOffset=this.getMetadataOffsetSync(fd);await util_1.promisify(this.lowerDir.read)(this.getLowerFd(fd),metaChunk,0,metaChunk.length,metaChunkOffset);const metaBlock=await this.crypto.decryptChunk(metaChunk),metaPlainTrimmed=metaBlock.slice(0,metaBlock.indexOf("\0")),fileMeta=eval("("+metaPlainTrimmed.toString()+")");this.metadata[fd]=fileMeta}loadMetadataSync(fd){const metaChunk=Buffer.alloc(this.chunkSize),metaChunkOffset=this.getMetadataOffsetSync(fd);this.lowerDir.readSync(this.getLowerFd(fd),metaChunk,0,metaChunk.length,metaChunkOffset);const metaBlock=this.crypto.decryptChunkSync(metaChunk),metaPlainTrimmed=metaBlock.slice(0,metaBlock.indexOf("\0")),fileMeta=eval("("+metaPlainTrimmed.toString()+")");this.metadata[fd]=fileMeta}getMetadata(t){if(this.metadata.hasOwnProperty(t)){const r=this.metadata[t];if(r)return r}throw Error("file descriptor has no metadata stored")}getMetaField(t,r){const e=this.getMetadata(t);if(e.hasOwnProperty(r)){const t=e[r];if(null!=t)return t}throw Error("Field does not exist")}getMetadataOffsetSync(t){const r=this.getEfsFd(t),e=this.lowerDir.fstatSync(this.getLowerFd(t)).size;if("w"===r.getFlags()[0])return e;const i=e/this.chunkSize;return this.chunkNumToOffset(i-1)}getEfsFd(t){if(this.fileDescriptors.has(t)){const r=this.fileDescriptors.get(t);if(r)return r}throw Error("file descriptor has no metadata stored")}getPath(t){if("string"==typeof t)return t;if(t instanceof Buffer)return t.toString();if(t instanceof URL)return this.getPathFromURL(t);throw new TypeError("path must be a string or Buffer or URL")}getPathFromURL(t){if(t.hasOwnProperty("hostname"))throw new TypeError("ERR_INVALID_FILE_URL_HOST");const r=t.pathname;if(r.match(/%2[fF]/))throw new TypeError("ERR_INVALID_FILE_URL_PATH");return decodeURIComponent(r)}}exports.default=EncryptedFS}).call(this,__webpack_require__(0).Buffer)},function(t,r){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,r){t.exports=require("base64-js")},function(t,r){t.exports=require("ieee754")},function(t,r){t.exports=require("isarray")},function(t,r,e){"use strict";(function(t){Object.defineProperty(r,"__esModule",{value:!0});const i=e(1);function n(t){const r=i.cryptoConstants.SALT_LEN,e=r+i.cryptoConstants.INIT_VECTOR_LEN,n=e+i.cryptoConstants.AUTH_TAG_LEN;return{salt:t.slice(0,r),initVector:t.slice(r,e),authTag:t.slice(e,n),encryptedBuffer:t.slice(n)}}r.deconstructChunk=n;r.EncryptedFSCrypto=class{constructor(t,r,e=!1,n){this.algorithm="aes-256-gcm",this.masterKey=t,this.cryptoLib=r,this.useWebWorkers=e,this.useWebWorkers&&(this.workerPool=n||i.initializeWorkerPool())}encryptBlockSync(r){const e=this.cryptoLib.randomBytes(i.cryptoConstants.INIT_VECTOR_LEN),n=this.cryptoLib.randomBytes(i.cryptoConstants.SALT_LEN),o=this.cryptoLib.pbkdf2Sync(this.masterKey,n,i.cryptoConstants.PBKDF_NUM_ITERATIONS,i.cryptoConstants.KEY_LEN,"sha512"),s=this.cryptoLib.createCipheriv(this.algorithm,o,e),c=t.concat([s.update(r),s.final()]),a=s.getAuthTag();return t.concat([n,e,a,c])}async encryptBlock(r){const e=this.cryptoLib.randomBytes(i.cryptoConstants.INIT_VECTOR_LEN),n=this.cryptoLib.randomBytes(i.cryptoConstants.SALT_LEN);if(this.useWebWorkers){if(!this.workerPool)for(console.log("waiting for web worker initialization");!this.workerPool;);const i=await this.workerPool.queue(async t=>await t.encryptBlock(r,this.masterKey,n,e));return t.from(i)}{const o=this.cryptoLib.pbkdf2Sync(this.masterKey,n,i.cryptoConstants.PBKDF_NUM_ITERATIONS,i.cryptoConstants.KEY_LEN,"sha512"),s=this.cryptoLib.createCipheriv(this.algorithm,o,e),c=t.concat([s.update(r),s.final()]),a=s.getAuthTag();return t.concat([n,e,a,c])}}decryptChunkSync(r){const{salt:e,initVector:o,authTag:s,encryptedBuffer:c}=n(r),a=this.cryptoLib.pbkdf2Sync(this.masterKey,e,i.cryptoConstants.PBKDF_NUM_ITERATIONS,i.cryptoConstants.KEY_LEN,"sha512"),u=this.cryptoLib.createDecipheriv(this.algorithm,a,o);return s&&u.setAuthTag(s),t.concat([u.update(c),u.final()])}async decryptChunk(r){if(this.useWebWorkers){if(!this.workerPool)for(console.log("waiting for web worker initialization");!this.workerPool;);const e=await this.workerPool.queue(async t=>await t.decryptChunk(r,this.masterKey));return t.from(e)}{const{salt:e,initVector:o,authTag:s,encryptedBuffer:c}=n(r),a=this.cryptoLib.pbkdf2Sync(this.masterKey,e,i.cryptoConstants.PBKDF_NUM_ITERATIONS,i.cryptoConstants.KEY_LEN,"sha512"),u=this.cryptoLib.createDecipheriv(this.algorithm,a,o);return s&&u.setAuthTag(s),t.concat([u.update(c),u.final()])}}hashSync(t,r="hex"){const e=this.cryptoLib.createHash("sha256");return e.update(t),e.digest()}}}).call(this,e(0).Buffer)},function(t,r){t.exports=require("threads")},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=class{constructor(t,r,e){this._lowerFd=t,this._upperFd=r,this._flags=e}getUpperFd(){return this._upperFd}getLowerFd(){return this._lowerFd}getFlags(){return this._flags}}},function(t,r,e){(function(t){function e(t,r){for(var e=0,i=t.length-1;i>=0;i--){var n=t[i];"."===n?t.splice(i,1):".."===n?(t.splice(i,1),e++):e&&(t.splice(i,1),e--)}if(r)for(;e--;e)t.unshift("..");return t}function i(t,r){if(t.filter)return t.filter(r);for(var e=[],i=0;i<t.length;i++)r(t[i],i,t)&&e.push(t[i]);return e}r.resolve=function(){for(var r="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(r=s+"/"+r,n="/"===s.charAt(0))}return(n?"/":"")+(r=e(i(r.split("/"),(function(t){return!!t})),!n).join("/"))||"."},r.normalize=function(t){var o=r.isAbsolute(t),s="/"===n(t,-1);return(t=e(i(t.split("/"),(function(t){return!!t})),!o).join("/"))||o||(t="."),t&&s&&(t+="/"),(o?"/":"")+t},r.isAbsolute=function(t){return"/"===t.charAt(0)},r.join=function(){var t=Array.prototype.slice.call(arguments,0);return r.normalize(i(t,(function(t,r){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},r.relative=function(t,e){function i(t){for(var r=0;r<t.length&&""===t[r];r++);for(var e=t.length-1;e>=0&&""===t[e];e--);return r>e?[]:t.slice(r,e-r+1)}t=r.resolve(t).substr(1),e=r.resolve(e).substr(1);for(var n=i(t.split("/")),o=i(e.split("/")),s=Math.min(n.length,o.length),c=s,a=0;a<s;a++)if(n[a]!==o[a]){c=a;break}var u=[];for(a=c;a<n.length;a++)u.push("..");return(u=u.concat(o.slice(c))).join("/")},r.sep="/",r.delimiter=":",r.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var r=t.charCodeAt(0),e=47===r,i=-1,n=!0,o=t.length-1;o>=1;--o)if(47===(r=t.charCodeAt(o))){if(!n){i=o;break}}else n=!1;return-1===i?e?"/":".":e&&1===i?"/":t.slice(0,i)},r.basename=function(t,r){var e=function(t){"string"!=typeof t&&(t+="");var r,e=0,i=-1,n=!0;for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!n){e=r+1;break}}else-1===i&&(n=!1,i=r+1);return-1===i?"":t.slice(e,i)}(t);return r&&e.substr(-1*r.length)===r&&(e=e.substr(0,e.length-r.length)),e},r.extname=function(t){"string"!=typeof t&&(t+="");for(var r=-1,e=0,i=-1,n=!0,o=0,s=t.length-1;s>=0;--s){var c=t.charCodeAt(s);if(47!==c)-1===i&&(n=!1,i=s+1),46===c?-1===r?r=s:1!==o&&(o=1):-1!==r&&(o=-1);else if(!n){e=s+1;break}}return-1===r||-1===i||0===o||1===o&&r===i-1&&r===e+1?"":t.slice(r,i)};var n="b"==="ab".substr(-1)?function(t,r,e){return t.substr(r,e)}:function(t,r,e){return r<0&&(r=t.length+r),t.substr(r,e)}}).call(this,e(13))},function(t,r){var e,i,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var a,u=[],h=!1,l=-1;function f(){h&&a&&(h=!1,a.length?u=a.concat(u):l=-1,u.length&&p())}function p(){if(!h){var t=c(f);h=!0;for(var r=u.length;r;){for(a=u,u=[];++l<r;)a&&a[l].run();l=-1,r=u.length}a=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(r){try{return i.call(null,t)}catch(r){return i.call(this,t)}}}(t)}}function y(t,r){this.fun=t,this.array=r}function d(){}n.nextTick=function(t){var r=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)r[e-1]=arguments[e];u.push(new y(t,r)),1!==u.length||h||c(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=d,n.addListener=d,n.once=d,n.off=d,n.removeListener=d,n.removeAllListeners=d,n.emit=d,n.prependListener=d,n.prependOnceListener=d,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});class i extends Error{constructor(t,r,e,i){let n=t.code+": "+t.description;null!=r&&(n+=", "+r,null!=e&&(n+=" -> "+e)),super(n),this.errno=t.errno,this.code=t.code,this.errnoDescription=t.description,null!=i&&(this.syscall=i)}setPaths(t,r){let e=this.code+": "+this.errnoDescription+", "+t;null!=r&&(e+=" -> "+r),this.message=e}setSyscall(t){this.syscall=t}}r.EncryptedFSError=i;var n=e(15);r.errno=n.code},function(t,r){t.exports=require("errno")},function(t,r,e){"use strict";(function(t){Object.defineProperty(r,"__esModule",{value:!0});const i=e(17),n=e(2);class o extends i.Readable{constructor(t,r,e){var i;super({highWaterMark:r.highWaterMark,encoding:r.encoding}),this.efs=e,this.bytesRead=0,this.path=t,this.fd=void 0===r.fd?null:r.fd,this.flags=void 0===r.flags?"r":r.flags,this.mode=void 0===r.mode?n.DEFAULT_FILE_PERM:r.mode,this.autoClose=void 0===r.autoClose||r.autoClose,this.start=r.start,this.end=void 0===r.end?1/0:r.end,this.pos=null!==(i=r.start)&&void 0!==i?i:0,"number"!=typeof this.fd&&this._open(),super.on("end",()=>{this.autoClose&&this.destroy()})}_open(){this.efs.open(this.path,this.flags,this.mode).then(t=>{this.fd=t,super.emit("open",t),super.read()}).catch(t=>{this.autoClose&&this.destroy(),super.emit("error",t)})}_read(r){if("number"!=typeof this.fd)return void super.once("open",()=>{this._read(r)});if(this.destroyed)return;if(null!=this.pos&&this.end!==1/0&&(r=Math.min(this.end-this.pos+1,r)),r<=0)return void this.push(null);const e=t.allocUnsafe(r);this.efs.read(this.fd,e,0,r,this.pos).then(t=>{t>0?(this.bytesRead+=t,this.push(e.slice(0,t))):this.push(null)}).catch(t=>{this.autoClose&&this.destroy(),super.emit("error",t)}),null!=this.pos&&(this.pos+=r)}_destroy(t,r){this._close(e=>{r(t||e)})}_close(t){if(t&&super.once("close",t),"number"==typeof this.fd){if(this.closed)return new Promise(()=>super.emit("close"));this.closed=!0,this.efs.close(this.fd).then(()=>{this.emit("close")}).catch(t=>{this.emit("error",t)}),this.fd=null}else super.once("open",()=>{this._close(null)})}}r.ReadStream=o;class s extends i.Writable{constructor(t,r,e){var i;super({highWaterMark:r.highWaterMark}),this.efs=e,this.bytesWritten=0,this.path=t,this.fd=void 0===r.fd?null:r.fd,this.flags=void 0===r.flags?"w":r.flags,this.mode=void 0===r.mode?n.DEFAULT_FILE_PERM:r.mode,this.autoClose=void 0===r.autoClose||r.autoClose,this.start=null!==(i=r.start)&&void 0!==i?i:0,this.pos=this.start,r.encoding&&super.setDefaultEncoding(r.encoding),"number"!=typeof this.fd&&this._open(),super.on("finish",()=>{this.autoClose&&this.destroy()})}_open(){this.efs.open(this.path,this.flags,this.mode).then(t=>{this.fd=t,super.emit("open",t)}).catch(t=>{this.autoClose&&this.destroy(),super.emit("error",t)})}_write(r,e,i){if("number"!=typeof this.fd)return super.once("open",()=>{this._write(r,e,i)});let n;n="string"==typeof r?t.from(r):r,this.efs.write(this.fd,n,0,r.length,this.pos).then(t=>{this.bytesWritten+=t,i()}).catch(t=>{this.autoClose&&this.destroy(),i(t)}),void 0!==this.pos&&(this.pos+=r.length)}_writev(r,e){this._write(t.concat(r.map(t=>t.chunk)),void 0,e)}_destroy(t,r){this._close(e=>{r(t||e)})}_close(t){if(t&&super.once("close",t),"number"==typeof this.fd){if(this.closed)return new Promise(()=>super.emit("close"));this.closed=!0,this.efs.close(this.fd).then(()=>{this.emit("close")}).catch(t=>{this.emit("error",t)}),this.fd=null}else super.once("open",()=>{this._close(null)})}_final(t){t()}}r.WriteStream=s}).call(this,e(0).Buffer)},function(t,r){t.exports=require("readable-stream")},function(t,r){t.exports=require("util")},function(t,r){t.exports=require("auto-bind-proxy")},function(t,r,e){"use strict";r.randomBytes=r.rng=r.pseudoRandomBytes=r.prng=e(21),r.createHash=r.Hash=e(22),r.createHmac=r.Hmac=e(23);var i=e(24),n=Object.keys(i),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(n);r.getHashes=function(){return o};var s=e(25);r.pbkdf2=s.pbkdf2,r.pbkdf2Sync=s.pbkdf2Sync;var c=e(26);r.Cipher=c.Cipher,r.createCipher=c.createCipher,r.Cipheriv=c.Cipheriv,r.createCipheriv=c.createCipheriv,r.Decipher=c.Decipher,r.createDecipher=c.createDecipher,r.Decipheriv=c.Decipheriv,r.createDecipheriv=c.createDecipheriv,r.getCiphers=c.getCiphers,r.listCiphers=c.listCiphers;var a=e(27);r.DiffieHellmanGroup=a.DiffieHellmanGroup,r.createDiffieHellmanGroup=a.createDiffieHellmanGroup,r.getDiffieHellman=a.getDiffieHellman,r.createDiffieHellman=a.createDiffieHellman,r.DiffieHellman=a.DiffieHellman;var u=e(28);r.createSign=u.createSign,r.Sign=u.Sign,r.createVerify=u.createVerify,r.Verify=u.Verify,r.createECDH=e(29);var h=e(30);r.publicEncrypt=h.publicEncrypt,r.privateEncrypt=h.privateEncrypt,r.publicDecrypt=h.publicDecrypt,r.privateDecrypt=h.privateDecrypt;var l=e(31);r.randomFill=l.randomFill,r.randomFillSync=l.randomFillSync,r.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},r.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(t,r){t.exports=require("randombytes")},function(t,r){t.exports=require("create-hash")},function(t,r){t.exports=require("create-hmac")},function(t,r){t.exports=require("browserify-sign/algos")},function(t,r){t.exports=require("pbkdf2")},function(t,r){t.exports=require("browserify-cipher")},function(t,r){t.exports=require("diffie-hellman")},function(t,r){t.exports=require("browserify-sign")},function(t,r){t.exports=require("create-ecdh")},function(t,r){t.exports=require("public-encrypt")},function(t,r){t.exports=require("randomfill")}])}));
//# sourceMappingURL=encryptedfs.js.map